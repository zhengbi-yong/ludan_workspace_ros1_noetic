<launch>
    <!-- 硬件接口参数 -->
    <arg name="port" default="/dev/ttyACM0" />
    <arg name="baud" default="921600" />
    <arg name="loop_hz" default="500" />
    <arg name="joint_mapping" default="" />
    
    <!-- MoveIt 参数 -->
    <arg name="moveit_controller_manager" default="ros_control" />
    <arg name="pipeline" default="ompl" />
    <arg name="load_robot_description" default="true" />
    <arg name="use_rviz" default="false" />

    <!-- 启动硬件接口和控制器 -->
    <include file="$(find damiao_motor_driver)/launch/motor_hw_with_moveit.launch">
        <arg name="port" value="$(arg port)" />
        <arg name="baud" value="$(arg baud)" />
        <arg name="loop_hz" value="$(arg loop_hz)" />
        <arg name="joint_mapping" value="$(arg joint_mapping)" />
    </include>

    <!-- 启动 MoveIt -->
    <include file="$(find ludan_moveit_config)/launch/move_group.launch">
        <arg name="moveit_controller_manager" value="$(arg moveit_controller_manager)" />
        <arg name="pipeline" value="$(arg pipeline)" />
        <arg name="load_robot_description" value="$(arg load_robot_description)" />
        <arg name="allow_trajectory_execution" value="true" />
    </include>

    <!-- 启动 RViz -->
    <include if="$(arg use_rviz)" file="$(find ludan_moveit_config)/launch/moveit_rviz.launch" />

</launch>

